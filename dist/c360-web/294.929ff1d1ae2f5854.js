"use strict";(self.webpackChunkc360_web=self.webpackChunkc360_web||[]).push([[294],{7294:(E,_,s)=>{s.r(_),s.d(_,{AuthModule:()=>B});var g=s(6895),l=s(9549),c=s(284),r=s(4006);let m=(()=>{class e{}return e.genericError="Something went Wrong Pls try again",e.unauthorized="You are not authorized person to access this page",e.firstNameRegex="[a-zA-Z ]*",e.lastNameRegex="[a-zA-Z ]*",e.emailRegex="[A-Za-z0-9._%-]+@[A-Za-z0-9._%-]+\\.[a-z]{2,3}",e.phoneNoRegex="^[e0-9]{10,10}$",e.error="error",e})();var t=s(4650),f=s(9636),h=s(892),d=s(7392);function T(e,i){1&e&&(t.TgZ(0,"span"),t._uU(1,"This field is mandatory"),t.qZA())}function x(e,i){1&e&&(t.TgZ(0,"span"),t._uU(1,"This field is invalid"),t.qZA())}function b(e,i){if(1&e&&(t.TgZ(0,"mat-error"),t.YNc(1,T,2,0,"span",12),t.YNc(2,x,2,0,"span",12),t.qZA()),2&e){const n=t.oxw();t.xp6(1),t.Q6J("ngIf",n.signupForm.controls.firstName.errors.required),t.xp6(1),t.Q6J("ngIf",n.signupForm.controls.firstName.errors.pattern)}}function v(e,i){1&e&&(t.TgZ(0,"span"),t._uU(1,"This field is mandatory"),t.qZA())}function C(e,i){1&e&&(t.TgZ(0,"span"),t._uU(1,"This field is invalid "),t.qZA())}function N(e,i){if(1&e&&(t.TgZ(0,"mat-error"),t.YNc(1,v,2,0,"span",12),t.YNc(2,C,2,0,"span",12),t.qZA()),2&e){const n=t.oxw();t.xp6(1),t.Q6J("ngIf",n.signupForm.controls.lastName.errors.required),t.xp6(1),t.Q6J("ngIf",n.signupForm.controls.lastName.errors.pattern)}}function U(e,i){1&e&&(t.TgZ(0,"span"),t._uU(1,"This field is mandatory"),t.qZA())}function S(e,i){1&e&&(t.TgZ(0,"span"),t._uU(1,"This field is invalid "),t.qZA())}function A(e,i){if(1&e&&(t.TgZ(0,"mat-error"),t.YNc(1,U,2,0,"span",12),t.YNc(2,S,2,0,"span",12),t.qZA()),2&e){const n=t.oxw();t.xp6(1),t.Q6J("ngIf",n.signupForm.controls.email.errors.required),t.xp6(1),t.Q6J("ngIf",n.signupForm.controls.email.errors.pattern)}}function q(e,i){1&e&&(t.TgZ(0,"span"),t._uU(1,"This field is mandatory"),t.qZA())}function I(e,i){1&e&&(t.TgZ(0,"span"),t._uU(1,"This field is invalid "),t.qZA())}function y(e,i){if(1&e&&(t.TgZ(0,"mat-error"),t.YNc(1,q,2,0,"span",12),t.YNc(2,I,2,0,"span",12),t.qZA()),2&e){const n=t.oxw();t.xp6(1),t.Q6J("ngIf",n.signupForm.controls.password.errors.required),t.xp6(1),t.Q6J("ngIf",n.signupForm.controls.password.errors.pattern)}}function w(e,i){1&e&&(t.TgZ(0,"span"),t._uU(1,"This field is mandatory"),t.qZA())}function F(e,i){1&e&&(t.TgZ(0,"span"),t._uU(1,"This field is invalid "),t.qZA())}function J(e,i){if(1&e&&(t.TgZ(0,"mat-error"),t.YNc(1,w,2,0,"span",12),t.YNc(2,F,2,0,"span",12),t.qZA()),2&e){const n=t.oxw();t.xp6(1),t.Q6J("ngIf",n.signupForm.controls.phoneNo.errors.required),t.xp6(1),t.Q6J("ngIf",n.signupForm.controls.phoneNo.errors.pattern)}}let Y=(()=>{class e{constructor(n,o,a){this.formBuilder=n,this.router=o,this.authServce=a,this.password=!0,this.signupForm=r.nJ}ngOnInit(){this.signupForm=this.formBuilder.group({firstName:[null,[r.kI.required,r.kI.pattern(m.firstNameRegex)]],lastName:[null,[r.kI.required,r.kI.pattern(m.lastNameRegex)]],email:[null,[r.kI.required,r.kI.pattern(m.emailRegex)]],password:[null,[r.kI.required]],phoneNo:[null,[r.kI.required,r.kI.pattern(m.phoneNoRegex)]]})}handleSubmit(){this.authServce.register(this.signupForm.value).subscribe(o=>{this.responseMessage=o?.message,this.router.navigateByUrl("auth/login")})}}return e.\u0275fac=function(n){return new(n||e)(t.Y36(r.QS),t.Y36(f.F0),t.Y36(h.e))},e.\u0275cmp=t.Xpm({type:e,selectors:[["app-signup"]],decls:49,vars:10,consts:[[1,"bootstrap-wrapper"],[1,"container"],[1,"row",2,"margin-top","20px"],[1,"col-md-6","offset-md-3"],[1,"logo-container","text-center"],["src","../../../assets/signuplogo.jpg","alt",""],[1,"text-center"],[1,"container",2,"margin-left","115px"],[3,"formGroup","ngSubmit"],["fxFlex","","fxLayout","column"],["appearance","fill",1,"full-width"],["matInput","","formControlName","firstName","required",""],[4,"ngIf"],["matInput","","formControlName","lastName","required",""],["matInput","","formControlName","email","required",""],["matInput","","formControlName","password","type","password","required","",3,"type"],["type","button","mat-icon-button","","matSuffix","",3,"click"],["matInput","","formControlName","phoneNo","required",""],["mat-raised-button","","color","primary",2,"margin-left","70px",3,"click"],["mat-raised-button","","color","primary","mat-dialog-close","",2,"margin-left","10px"]],template:function(n,o){1&n&&(t.TgZ(0,"div",0)(1,"div",1)(2,"div",2)(3,"div",3)(4,"div",4),t._UZ(5,"img",5),t.qZA(),t.TgZ(6,"h1",6),t._uU(7,"Signup Here !!"),t.qZA(),t.TgZ(8,"div",7)(9,"form",8),t.NdJ("ngSubmit",function(){return o.handleSubmit()}),t.TgZ(10,"div",9)(11,"mat-form-field",10)(12,"mat-label"),t._uU(13,"First Name"),t.qZA(),t._UZ(14,"input",11),t.YNc(15,b,3,2,"mat-error",12),t.qZA(),t._UZ(16,"br"),t.TgZ(17,"mat-form-field",10)(18,"mat-label"),t._uU(19,"LastName"),t.qZA(),t._UZ(20,"input",13),t.YNc(21,N,3,2,"mat-error",12),t.qZA(),t._UZ(22,"br"),t.TgZ(23,"mat-form-field",10)(24,"mat-label"),t._uU(25,"Email"),t.qZA(),t._UZ(26,"input",14),t.YNc(27,A,3,2,"mat-error",12),t.qZA(),t._UZ(28,"br"),t.TgZ(29,"mat-form-field",10)(30,"mat-label"),t._uU(31,"Password"),t.qZA(),t._UZ(32,"input",15),t.TgZ(33,"button",16),t.NdJ("click",function(){return o.password=!o.password}),t.TgZ(34,"mat-icon"),t._uU(35),t.qZA()(),t.YNc(36,y,3,2,"mat-error",12),t.qZA(),t._UZ(37,"br"),t.TgZ(38,"mat-form-field",10)(39,"mat-label"),t._uU(40,"PhoneNo"),t.qZA(),t._UZ(41,"input",17),t.YNc(42,J,3,2,"mat-error",12),t.qZA(),t._UZ(43,"br"),t.TgZ(44,"div",1)(45,"button",18),t.NdJ("click",function(){return o.handleSubmit()}),t._uU(46,"Register"),t.qZA(),t.TgZ(47,"button",19),t._uU(48,"Clear"),t.qZA()()()()()()()()()),2&n&&(t.xp6(9),t.Q6J("formGroup",o.signupForm),t.xp6(6),t.Q6J("ngIf",o.signupForm.controls.firstName.touched&&o.signupForm.controls.firstName.invalid),t.xp6(6),t.Q6J("ngIf",o.signupForm.controls.lastName.touched&&o.signupForm.controls.lastName.invalid),t.xp6(6),t.Q6J("ngIf",o.signupForm.controls.email.touched&&o.signupForm.controls.email.invalid),t.xp6(5),t.Q6J("type",o.password?"password":"text"),t.xp6(1),t.uIk("aria-label","Hide password")("aria-pressed",o.password),t.xp6(2),t.Oqu(o.password?"visibility_off":"visibility"),t.xp6(1),t.Q6J("ngIf",o.signupForm.controls.password.touched&&o.signupForm.controls.password.invalid),t.xp6(6),t.Q6J("ngIf",o.signupForm.controls.phoneNo.touched&&o.signupForm.controls.phoneNo.invalid))},dependencies:[g.O5,l.TO,l.KE,l.hX,l.R9,c.Nt,r._Y,r.Fj,r.JJ,r.JL,r.Q7,r.sg,r.u,d.Hw],styles:["img[_ngcontent-%COMP%]{width:70px;height:90px}.mat-toolbar[_ngcontent-%COMP%]{margin:-24x;width:auto;margin-bottom:10px}.margin-form-field[_ngcontent-%COMP%]{padding:5p}mat-hint[_ngcontent-%COMP%]{color:red}.mat-toolbar.mat-primary[_ngcontent-%COMP%]{background:#212121;color:#fff}.full-width[_ngcontent-%COMP%]{width:70%}"]}),e})();var Z=s(529);let M=(()=>{class e{constructor(n){this.http=n,this.baseUrl="http://localhost:8088/users"}login(n){console.log(n.email),localStorage.setItem("email",n.email)}signup(n){return console.log(n),this.http.post(this.baseUrl+"/user/new",n,{headers:(new Z.WM).set("Content-Type","application/json")})}getCurrentUserDetails(n){const o=this.baseUrl+"/me/"+n,a={Authorization:"Bearer "+localStorage.getItem("token")};return this.http.get(o,{headers:a})}}return e.\u0275fac=function(n){return new(n||e)(t.LFG(Z.eN))},e.\u0275prov=t.Yz7({token:e,factory:e.\u0275fac,providedIn:"root"}),e})();var k=s(5159);function Q(e,i){1&e&&(t.TgZ(0,"span"),t._uU(1," This field is Mandatory"),t.qZA())}function O(e,i){1&e&&(t.TgZ(0,"span"),t._uU(1," This field is Invalid"),t.qZA())}function L(e,i){if(1&e&&(t.TgZ(0,"mat-error"),t.YNc(1,Q,2,0,"span",12),t.YNc(2,O,2,0,"span",12),t.qZA()),2&e){const n=t.oxw();t.xp6(1),t.Q6J("ngIf",n.loginForm.controls.email.errors.required),t.xp6(1),t.Q6J("ngIf",n.loginForm.controls.email.errors.pattern)}}function P(e,i){1&e&&(t.TgZ(0,"span"),t._uU(1," This field is Mandatory"),t.qZA())}function R(e,i){if(1&e&&(t.TgZ(0,"mat-error"),t.YNc(1,P,2,0,"span",12),t.qZA()),2&e){const n=t.oxw();t.xp6(1),t.Q6J("ngIf",n.loginForm.controls.password.errors.required)}}const z=[{path:"login",component:(()=>{class e{constructor(n,o,a,u,p){this.authServce=n,this.userService=o,this.accountService=a,this.router=u,this.formBuilder=p,this.hide=!0,this.loginForm=r.nJ}ngOnInit(){this.loginForm=this.formBuilder.group({email:[null,[r.kI.required,r.kI.pattern(m.emailRegex)]],password:[null,[r.kI.required]]})}formSubmit(){var n=this.loginForm.value;this.authServce.getToken(n).subscribe(o=>{this.responseMessage=o?.message,localStorage.setItem("token",o.token),this.userService.getCurrentUserDetails(n.email).subscribe(a=>{console.log(n.email),console.log(a);let u=a.id;localStorage.setItem("user",JSON.stringify(a)),console.log(".Id",u),this.accountService.getAccountDetails(u).subscribe(p=>{null==p||null==p||0==p.length?(alert("Error: Account Not Avaliable for User"),this.router.navigateByUrl("auth/login")):(console.log("accountData",p),localStorage.setItem("accountId",JSON.stringify(p[0].id)))})})},o=>{this.responseMessage=o.error?.message},()=>{this.router.navigateByUrl("app")})}signUp(){this.router.navigateByUrl("auth/signup")}}return e.\u0275fac=function(n){return new(n||e)(t.Y36(h.e),t.Y36(M),t.Y36(k.B),t.Y36(f.F0),t.Y36(r.QS))},e.\u0275cmp=t.Xpm({type:e,selectors:[["app-login"]],decls:35,vars:7,consts:[[1,"bootstrap-wrapper"],[1,"container"],[1,"row",2,"margin-top","20px"],[1,"col-md-6","offset-md-3"],[1,"logo-container","text-center"],["src","../../../assets/signuplogo.jpg","alt",""],[1,"text-center"],[1,"container",2,"margin-left","115px"],[3,"formGroup","ngSubmit"],["fxFlex","","fxLayout","column"],["appearance","fill","fxFlex","",1,"full-width"],["matInput","","formControlName","email","required",""],[4,"ngIf"],["matInput","","formControlName","password","type","password","required","",3,"type"],["type","button","mat-icon-button","","matSuffix","",3,"click"],[1,"container","text-center"],["mat-raised-button","","color","primary",2,"margin-right","110px",3,"click"],["mat-raised-button","","color","primary",2,"margin-right","120px"]],template:function(n,o){1&n&&(t.TgZ(0,"div",0)(1,"div",1)(2,"div",2)(3,"div",3)(4,"div",4),t._UZ(5,"img",5),t.qZA(),t.TgZ(6,"h1",6),t._uU(7,"Login Here!!"),t.qZA(),t.TgZ(8,"div",7)(9,"form",8),t.NdJ("ngSubmit",function(){return o.formSubmit()}),t.TgZ(10,"div",9)(11,"mat-form-field",10)(12,"mat-label"),t._uU(13,"Email"),t.qZA(),t._UZ(14,"input",11),t.YNc(15,L,3,2,"mat-error",12),t.qZA(),t._UZ(16,"br"),t.TgZ(17,"mat-form-field",10)(18,"mat-label"),t._uU(19,"Password"),t.qZA(),t._UZ(20,"input",13),t.TgZ(21,"button",14),t.NdJ("click",function(){return o.hide=!o.hide}),t.TgZ(22,"mat-icon"),t._uU(23),t.qZA()(),t.YNc(24,R,2,1,"mat-error",12),t.qZA()()(),t._UZ(25,"br"),t.TgZ(26,"div",15)(27,"button",16),t.NdJ("click",function(){return o.formSubmit()}),t._uU(28,"Login"),t.qZA(),t.TgZ(29,"button",17),t._uU(30,"Clear"),t.qZA(),t._UZ(31,"br")(32,"br"),t.TgZ(33,"button",16),t.NdJ("click",function(){return o.signUp()}),t._uU(34,"SignUp"),t.qZA()()()()()()()),2&n&&(t.xp6(9),t.Q6J("formGroup",o.loginForm),t.xp6(6),t.Q6J("ngIf",o.loginForm.controls.email.touched&&o.loginForm.controls.email.invalid),t.xp6(5),t.Q6J("type",o.hide?"password":"text"),t.xp6(1),t.uIk("aria-label","Hide password")("aria-pressed",o.hide),t.xp6(2),t.hij(" ",o.hide?"visibility_off":"visibility"," "),t.xp6(1),t.Q6J("ngIf",o.loginForm.controls.password.touched&&o.loginForm.controls.password.invalid))},dependencies:[g.O5,l.TO,l.KE,l.hX,l.R9,c.Nt,r._Y,r.Fj,r.JJ,r.JL,r.Q7,r.sg,r.u,d.Hw],styles:["html[_ngcontent-%COMP%], body[_ngcontent-%COMP%]{height:100%}body[_ngcontent-%COMP%]{margin:0;font-family:Robto,Helvetica Neue,sans-serif}.text-center[_ngcontent-%COMP%]{text-align:center}img[_ngcontent-%COMP%]{width:70px;height:90px}.logo-container[_ngcontent-%COMP%]{display:flex;justify-content:center;align-items:center}.full-width[_ngcontent-%COMP%]{width:70%}.login-container[_ngcontent-%COMP%]{max-width:400px;margin:60px auto 0}.error[_ngcontent-%COMP%]{color:tomato;font-size:12px;padding-top:4px}.spacer[_ngcontent-%COMP%]{align-items:flex-end}.mat-toolbar.mat-primary[_ngcontent-%COMP%]{background:#212121;color:#fff}"]}),e})()},{path:"signup",component:Y}];let B=(()=>{class e{}return e.\u0275fac=function(n){return new(n||e)},e.\u0275mod=t.oAB({type:e}),e.\u0275inj=t.cJS({imports:[g.ez,l.lN,c.c,r.u5,f.Bz.forChild(z),r.UX,d.Ps]}),e})()}}]);